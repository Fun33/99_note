/*!
 * Copyright (c) 2008-2011, PIXNET Digital Media Corporation.
 * All rights reserved.
 */
document.write('<script type="text/javascript" src="//s.pixfs.net/js/tools/tools.min.js"><\/script>');var _=_||function(a){return a};var pix=pix||{};pix.p=pix.p||{profile:{},friend:{},alb:{},blog:{},club:{},gb:{},acct:{}};pix.f=pix.f||{profile:{},friend:{},alb:{},alb2:{},blog:{},club:{},gb:{},acct:{}};pix.v=pix.v||{};pix.changeCheck={Changed:false,check:false,confirmMsg:_("您已經變更了設定值但是尚未儲存，你確定要離開本頁嗎？"),unload_cb:function(b){var a=pix.changeCheck;if(!b){b=window.event}if(a.Changed&&a.check){b.returnValue=a.confirmMsg;return a.confirmMsg}},init:function(b){var a=pix.changeCheck;a.Changed=false;a.check=true;jQuery(b).change(function(){a.Changed=true});jQuery(function(){window.onbeforeunload=a.unload_cb})},change:function(){pix.changeCheck.Changed=true},reset:function(){pix.changeCheck.Changed=false}};pix.SlideShow={Speed:2000,crossFadeDuration:3,pos:0,_init:function(a){var b=this;b.Pic=[];b.preLoadPic=[];b.Id=a},load:function(a){var b=this;b.Pic.push(a)},preLoad:function(a){var b=this;if(""!==b.Pic[a]){window.status="Loading : "+b.Pic[a];b.preLoadPic[a]=new Image();b.preLoadPic[a].src=b.Pic[a];b.Pic[a]="";window.status=""}},start:function(){var a=this;if(0===a.Pic.length){return}a.preLoad(a.pos);function b(){var c=document.getElementById(a.Id);if(document.all){c.style.filter="blendTrans(duration=2)";c.style.filter="blendTrans(duration=crossFadeDuration)";c.filters.blendTrans.Apply()}c.src=a.preLoadPic[a.pos].src;if(document.all){c.filters.blendTrans.Play()}a.pos++;if(a.pos>(a.Pic.length-1)){a.pos=0}a.preLoad(a.pos)}b();setInterval(b,a.Speed)}};pix.escape_re=function(a){return a.replace(/([.?*+\^$\[\]\\(){}\|])/g,"\\$1")};pix.htmlspecialchars_decode=function(a,b){if(null===a){return""}a=a.toString();a=a.replace(/&amp;/g,"&");a=a.replace(/&lt;/g,"<");a=a.replace(/&gt;/g,">");a=a.replace(/&quot;/g,'"');if(b=="ENT_QUOTES"){a=a.replace(/&#039;/g,"'")}return a};pix.htmlfilterbr=function(a,b){if(null===a){return""}a=a.toString();a=a.replace(/<[bB][Rr][^>]*>/g,"\n");return a};pix.htmlspecialchars=function(b,a){if(null===b){return""}b=b.toString();b=b.replace(/&/g,"&amp;");b=b.replace(/</g,"&lt;");b=b.replace(/>/g,"&gt;");b=b.replace(/"/g,"&quot;");if("ENT_QUOTES"==a){b=b.replace(/'/g,"&#039;")}return b};pix.addUrlParam=function(b,c){var e=location.href.split("?")[0];var d=new Array();if("undefined"!==typeof location.href.split("?")[1]&&location.href.split("?")[1].length){d=location.href.split("?")[1].split("&");for(var a=0;a<d.length;a++){if(d[a].split("=")[0]==b){d.splice(a,1);break}}}d.push(b+"="+c);link=e+"?"+d.join("&");return link};pix.defTinyMCE=function(){return(typeof(window.tinyMCE)!="undefined")?true:false};pix.tinymce_init_instance_callback=function(b){function a(){var f=b.selection.getBookmark();if(b.getBody().childNodes.length!==0){pix.v.cursorPosition=f}}function e(f){f.selection.moveToBookmark(pix.v.cursorPosition)}function d(){pix.v.cursorPosition=null}if(tinymce.isIE){b.getDoc().attachEvent("onbeforedeactivate",function(){if(pix.v.mceContextMenu){pix.v.mceContextMenu=false;d()}else{a()}});b.onContextMenu.add(function(f,g){pix.v.mceContextMenu=true;if(g.ctrlKey){d(f)}});b.onClick.add(function(f,g){pix.v.mceContextMenu=false;d()});b.onBeforeExecCommand.add(function(f,h,g,i){if(("mceInsertContent"==h)&&pix.v.cursorPosition){e(f);d()}});b.onActivate.add(function(){d()})}function c(){pix.v.editorChanged=true}b.onChange.add(c);b.onExecCommand.add(c);b.onKeyDown.add(c)};pix.rawdata=function(a){this.flag=this.flag||jQuery("<div>\n</div>").text()=="\n";return(this.flag)?jQuery(a).text():pix.htmlspecialchars_decode(pix.htmlfilterbr(jQuery(a).html()))};pix.p.popupLoader=function(a){if("function"!==typeof pix.p.popup_cb){pix.p.popup_cb=undefined}pix.popup_cancel=function(){pix.p.hidebox()};jQuery("#popup-body .content").load(a,null,pix.p.showbox)};window.size=function(){var a=0;var b=0;if(!window.innerWidth){if(!(document.documentElement.clientWidth===0)){a=document.documentElement.clientWidth;b=document.documentElement.clientHeight}else{a=document.body.clientWidth;b=document.body.clientHeight}}else{a=window.innerWidth;b=window.innerHeight}return{width:a,height:b}};pix.p.showbox=function(){jQuery("#page-body select").hide();jQuery("#overlay").show().css("opacity","0.5");var a=jQuery("#popup-box").css("left",(jQuery(window).width()-jQuery("#popup-box").width())/2).css("top",(jQuery(window).height()-jQuery("#popup-box").height())/2).show();if(a.draggable){a.draggable({handle:"#popup-header",cancel:":input, button, option"})}pix.p.popupfocus();if(undefined!==pix.p.popup_cb){pix.p.popup_cb()}};pix.p.popupfocus=function(){jQuery("#popup-form :input:not(:hidden):first").focus()};pix.p.hidebox=function(){jQuery("#page-body select").show();jQuery("#overlay").hide().css("opacity","1");jQuery("#popup-submit-btn").removeAttr("disabled").find("span").text(_("送出")).end().show();jQuery("#popup-cancel-btn").find("span").text(_("取消")).end().show();jQuery("#popup-box").hide();pix.popup_submit=null;if(500!=jQuery("#popup-box").width()){pix.p.boxnormal()}};pix.p.togglebox=function(){var a=jQuery("#popup-box").width();if(500==a){pix.p.boxfull()}else{pix.p.boxnormal()}};pix.p.boxnormal=function(){var a=500,b=400;var c=jQuery("#popup-box").width(a).height(b).css("left",(jQuery(window).width()-a)/2).css("top",(jQuery(window).height()-b)/2);if(c.draggable){c.draggable({handle:jQuery("#popup-header"),cancel:":input, button, option"})}};pix.p.boxfull=function(){var a=jQuery(window).width();var b=jQuery(window).height();var c=jQuery("#popup-box").width(a*0.95).height(b*0.95).css("left",(a*0.05)/2).css("top",(b*0.05)/2);if(c.draggable){c.draggable("destroy")}};pix.p.boxfit=function(){var e=jQuery(window),a=jQuery("#popup-box"),c=jQuery("#popup-body"),d=c[0].scrollWidth-c[0].clientWidth,b=c[0].scrollHeight-c[0].clientHeight;a.width(Math.min(e.width(),a.width()+d)).height(Math.min(e.height(),a.height()+b)).css("left",(e.width()-a.width())/2).css("top",(e.height()-a.height())/2)};pix.p.validCameraFileName=pix.p.validCameraFileName||{skip:null,type:null,init:function(a){if(jQuery.cookie){this.skip=jQuery.cookie("valid_camera_nevernotify")}if(this.skip){return true}if(a.match(/^(CIMG|DSC_|DSCF|DSCN|DSC|DUW|IMG|JD|MGP|S700|PICT|IMAG|untitled|未命名)[_0-9]*\.(JPG|JPEG|GIF|PNG)$/i)){return this.switchConfirm()}else{if(a.match(/.+\.(jpg|jpeg|gif|png)$/i)){return this.switchConfirm()}}return true},switchConfirm:function(){if("panel"===this.type){return this.confirmPanel()}else{return this.confirmFront()}},confirmFront:function(){if(confirm(_("您使用的檔名（含IMG、DSC等常用相機預設檔名）可能會被系統判定為相機預設檔名，將無法於前台顯示，請確認是否要儲存？"))){return true}else{return false}},confirmPanel:function(){pix.p.confirm("",_("您使用的檔名（含IMG、DSC等常用相機預設檔名）可能會被系統判定為相機預設檔名，將無法於前台顯示，請確認是否要儲存？"),function(b,a){if(a&&a.note&&a.note.neveragain){pix.p.validCameraFileName.skip=true;jQuery.cookie("valid_camera_nevernotify",1,{expires:365,path:"/",secure:false})}},{type:"warning",option:{yes:_("確認")},note:{neveragain:_("不要再提示我")}})}};pix.setPreference=function(b,c,a,d){if("undefined"===typeof a){a="panel"}if("undefined"===typeof pix.panelsite){pix.panelsite="panel.pixnet.cc"}if("function"!==typeof d){d=function(){}}jQuery.get("http://"+pix.panelsite+"/settings/setpreference?key="+b+"&value="+c+"&site="+a,d,"jsonp")};pix.getPreference=function(e,c){if("undefined"===typeof c){c="panel"}var b=new Array("panel");var a;if(-1!==jQuery.inArray(c,b)){var d=jQuery.parseJSON(jQuery.cookie("preferences"))||{};if("undefined"!==typeof d[c]){a=d[c]}}else{a=jQuery.parseJSON(jQuery.cookie("preferences"))||{}}if("undefined"!==typeof a&&"undefined"!==typeof a[e]){return a[e]}return false};(function(b){function a(d){var c=b(this).closest("form");if(c.length===0){return true}if(d.type=="keydown"&&d.keyCode!=13){return true}if(d.type=="click"&&d.button!==0){return true}if(c.hasClass("oneTimeForm")){if(c.data("submitted")===true){return false}else{c.data("submitted",true)}}return true}b(function(){b("input[type=submit]").live("click keydown",a);b("button[type=submit]").live("click keydown",a)});b(function(){b(".trace-click").each(function(){if(!b(this).is("a")){b(this).append('<a href="'+b(this).attr("data-link")+'" target="_blank" style="width:'+b(this).width()+"px;height:"+b(this).height()+"px;top:0px;left:0px;z-index:"+(parseInt(b(this).css("z-index")?b(this).css("z-index"):0)+1)+';position:absolute;"></a>')}});b(".trace-click").live("click",function(j){if(!b(this).attr("data-counterlink")){return}var f=b(this);var d,h;var g=false;if(f.is("a")){d=f.attr("href");h=f.attr("target")}else{d=f.attr("data-link");h=f.attr("data-target")}if(h&&h!==window.name){g=true}else{if(j.metaKey||j.shiftKey||j.ctrlKey||j.altKey){g=true}else{if(j.button&&j.button!==1){g=true}else{if(j.which&&j.which!==1){g=true}}}}if(!g){j.preventDefault()}var c=new Image(1,1);c.src=f.attr("data-counterlink");c.onload=function(){if(!g){document.location.href=d}};c.onerror=function(){if(!g){document.location.href=d}}})})})(jQuery);jQuery(function(){jQuery(document).bind("keydown","z",function(){if(jQuery("link[rel=first]").attr("href")!==undefined&&"#"!=jQuery("link[rel=first]").attr("href")){window.location.href=jQuery("link[rel=first]").attr("href")}});jQuery(document).bind("keydown","x",function(){if(jQuery("link[rel=prev]").attr("href")!==undefined&&"#"!=jQuery("link[rel=prev]").attr("href")){window.location.href=jQuery("link[rel=prev]").attr("href")}});jQuery(document).bind("keydown","c",function(){if(jQuery("link[rel=next]").attr("href")!==undefined&&"#"!=jQuery("link[rel=next]").attr("href")){window.location.href=jQuery("link[rel=next]").attr("href")}});jQuery(document).bind("keydown","v",function(){if(jQuery("link[rel=last]").attr("href")!==undefined&&"#"!=jQuery("link[rel=last]").attr("href")){window.location.href=jQuery("link[rel=last]").attr("href")}});jQuery(document).bind("keydown","b",function(){if(jQuery("link[rel=up]").attr("href")!==undefined&&"#"!=jQuery("link[rel=up]").attr("href")){window.location.href=jQuery("link[rel=up]").attr("href")}});jQuery(document).bind("keydown","right",function(){if(jQuery("link[rel=next]").attr("href")!==undefined&&"#"!=jQuery("link[rel=next]").attr("href")){window.location.href=jQuery("link[rel=next]").attr("href")}});jQuery(document).bind("keydown","left",function(){if(jQuery("link[rel=prev]").attr("href")!==undefined&&"#"!=jQuery("link[rel=prev]").attr("href")){window.location.href=jQuery("link[rel=prev]").attr("href")}})});